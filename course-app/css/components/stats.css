/* ==========================================================================
   Stats & Metrics Components - AI Training Platform
   Statistics displays, metrics cards, and activity visualizations
   ========================================================================== */

/* ==========================================================================
   Metric Card
   ========================================================================== */

.metric-card {
  background: var(--bg-secondary);
  border: 1px solid var(--border-subtle);
  border-radius: var(--radius-xl);
  padding: var(--space-5);
  transition: var(--transition-shadow), var(--transition-transform);
}

.metric-card:hover {
  box-shadow: var(--shadow-md);
  transform: translateY(-2px);
}

.metric-card__header {
  display: flex;
  align-items: flex-start;
  justify-content: space-between;
  margin-bottom: var(--space-3);
}

.metric-card__icon {
  width: 44px;
  height: 44px;
  display: flex;
  align-items: center;
  justify-content: center;
  border-radius: var(--radius-lg);
  flex-shrink: 0;
}

.metric-card__icon svg {
  width: 24px;
  height: 24px;
}

.metric-card__icon--primary {
  background: var(--accent-primary-muted);
  color: var(--accent-primary);
}

.metric-card__icon--cyan {
  background: var(--accent-cyan-muted);
  color: var(--accent-cyan);
}

.metric-card__icon--amber {
  background: rgba(245, 158, 11, 0.15);
  color: var(--accent-amber);
}

.metric-card__icon--success {
  background: var(--accent-success-muted);
  color: var(--accent-success);
}

.metric-card__icon--purple {
  background: rgba(139, 92, 246, 0.15);
  color: var(--accent-purple);
}

.metric-card__trend {
  display: flex;
  align-items: center;
  gap: var(--space-1);
  padding: var(--space-1) var(--space-2);
  border-radius: var(--radius-full);
  font-size: var(--text-xs);
  font-weight: var(--font-medium);
}

.metric-card__trend--up {
  background: var(--accent-success-muted);
  color: var(--accent-success);
}

.metric-card__trend--down {
  background: rgba(239, 68, 68, 0.15);
  color: var(--accent-error);
}

.metric-card__trend--neutral {
  background: var(--bg-tertiary);
  color: var(--text-muted);
}

.metric-card__trend svg {
  width: 12px;
  height: 12px;
}

.metric-card__value {
  font-family: var(--font-display);
  font-size: var(--text-3xl);
  font-weight: var(--font-bold);
  color: var(--text-primary);
  line-height: 1;
  margin-bottom: var(--space-1);
}

.metric-card__label {
  font-size: var(--text-sm);
  color: var(--text-muted);
}

.metric-card__footer {
  margin-top: var(--space-4);
  padding-top: var(--space-4);
  border-top: 1px solid var(--border-subtle);
}

.metric-card__comparison {
  font-size: var(--text-xs);
  color: var(--text-muted);
}

.metric-card__comparison strong {
  color: var(--text-secondary);
}

/* Compact variant */
.metric-card--compact {
  padding: var(--space-4);
}

.metric-card--compact .metric-card__icon {
  width: 36px;
  height: 36px;
}

.metric-card--compact .metric-card__icon svg {
  width: 20px;
  height: 20px;
}

.metric-card--compact .metric-card__value {
  font-size: var(--text-2xl);
}

/* ==========================================================================
   Stats Grid
   ========================================================================== */

.stats-grid {
  display: grid;
  grid-template-columns: repeat(4, 1fr);
  gap: var(--space-4);
}

@media (max-width: 1200px) {
  .stats-grid {
    grid-template-columns: repeat(2, 1fr);
  }
}

@media (max-width: 640px) {
  .stats-grid {
    grid-template-columns: 1fr;
  }
}

/* ==========================================================================
   Stat List (Vertical)
   ========================================================================== */

.stat-list {
  display: flex;
  flex-direction: column;
  gap: var(--space-4);
}

.stat-list__item {
  display: flex;
  align-items: center;
  justify-content: space-between;
  padding: var(--space-3) 0;
  border-bottom: 1px solid var(--border-subtle);
}

.stat-list__item:last-child {
  border-bottom: none;
  padding-bottom: 0;
}

.stat-list__label {
  display: flex;
  align-items: center;
  gap: var(--space-3);
  font-size: var(--text-sm);
  color: var(--text-secondary);
}

.stat-list__dot {
  width: 8px;
  height: 8px;
  border-radius: var(--radius-full);
  flex-shrink: 0;
}

.stat-list__value {
  font-family: var(--font-mono);
  font-size: var(--text-sm);
  font-weight: var(--font-semibold);
  color: var(--text-primary);
}

/* ==========================================================================
   Activity Heatmap (GitHub-style contribution graph)
   ========================================================================== */

.heatmap {
  background: var(--bg-secondary);
  border: 1px solid var(--border-subtle);
  border-radius: var(--radius-xl);
  padding: var(--space-5);
}

.heatmap__header {
  display: flex;
  align-items: center;
  justify-content: space-between;
  margin-bottom: var(--space-4);
}

.heatmap__title {
  font-size: var(--text-base);
  font-weight: var(--font-semibold);
  color: var(--text-primary);
}

.heatmap__period {
  font-size: var(--text-sm);
  color: var(--text-muted);
}

.heatmap__grid {
  display: flex;
  flex-direction: column;
  gap: var(--space-2);
  overflow-x: auto;
  padding-bottom: var(--space-2);
}

.heatmap__cells {
  display: flex;
  gap: 3px;
}

.heatmap__week {
  display: flex;
  flex-direction: column;
  gap: 3px;
}

.heatmap__day {
  width: 12px;
  height: 12px;
  background: var(--bg-quaternary);
  border-radius: 2px;
  cursor: pointer;
  transition: transform 0.15s ease;
}

.heatmap__day:hover {
  transform: scale(1.3);
}

/* Activity levels */
.heatmap__day--level-0 { background: var(--bg-quaternary); }
.heatmap__day--level-1 { background: rgba(99, 102, 241, 0.25); }
.heatmap__day--level-2 { background: rgba(99, 102, 241, 0.5); }
.heatmap__day--level-3 { background: rgba(99, 102, 241, 0.75); }
.heatmap__day--level-4 { background: var(--accent-primary); }

/* Color variants */
.heatmap--success .heatmap__day--level-1 { background: rgba(16, 185, 129, 0.25); }
.heatmap--success .heatmap__day--level-2 { background: rgba(16, 185, 129, 0.5); }
.heatmap--success .heatmap__day--level-3 { background: rgba(16, 185, 129, 0.75); }
.heatmap--success .heatmap__day--level-4 { background: var(--accent-success); }

.heatmap--amber .heatmap__day--level-1 { background: rgba(245, 158, 11, 0.25); }
.heatmap--amber .heatmap__day--level-2 { background: rgba(245, 158, 11, 0.5); }
.heatmap--amber .heatmap__day--level-3 { background: rgba(245, 158, 11, 0.75); }
.heatmap--amber .heatmap__day--level-4 { background: var(--accent-amber); }

.heatmap__months {
  display: flex;
  gap: var(--space-6);
  margin-bottom: var(--space-2);
  padding-left: 40px;
}

.heatmap__months span {
  font-size: 10px;
  color: var(--text-muted);
}

.heatmap__days {
  display: flex;
  flex-direction: column;
  gap: var(--space-2);
  position: absolute;
  left: 0;
  top: 0;
}

.heatmap__days span {
  font-size: 10px;
  color: var(--text-muted);
  height: 12px;
  line-height: 12px;
}

.heatmap__days-label {
  display: flex;
  flex-direction: column;
  gap: 3px;
  margin-right: var(--space-2);
}

.heatmap__day-label {
  height: 12px;
  font-size: 10px;
  color: var(--text-muted);
  line-height: 12px;
}

.heatmap__footer {
  display: flex;
  align-items: center;
  justify-content: space-between;
  margin-top: var(--space-4);
  padding-top: var(--space-4);
  border-top: 1px solid var(--border-subtle);
}

.heatmap__legend {
  display: flex;
  align-items: center;
  gap: var(--space-2);
}

.heatmap__legend-label {
  font-size: var(--text-xs);
  color: var(--text-muted);
}

.heatmap__legend-scale {
  display: flex;
  gap: 2px;
}

.heatmap__legend-box {
  width: 12px;
  height: 12px;
  border-radius: 2px;
}

.heatmap__summary {
  font-size: var(--text-sm);
  color: var(--text-secondary);
}

.heatmap__summary strong {
  color: var(--text-primary);
  font-weight: var(--font-semibold);
}

/* ==========================================================================
   Leaderboard
   ========================================================================== */

.leaderboard {
  background: var(--bg-secondary);
  border: 1px solid var(--border-subtle);
  border-radius: var(--radius-xl);
  overflow: hidden;
}

.leaderboard__header {
  display: flex;
  align-items: center;
  justify-content: space-between;
  padding: var(--space-5);
  border-bottom: 1px solid var(--border-subtle);
}

.leaderboard__title {
  font-size: var(--text-base);
  font-weight: var(--font-semibold);
  color: var(--text-primary);
}

.leaderboard__tabs {
  display: flex;
  gap: var(--space-1);
}

.leaderboard__tab {
  padding: var(--space-2) var(--space-3);
  background: transparent;
  border: none;
  border-radius: var(--radius-md);
  font-size: var(--text-xs);
  font-weight: var(--font-medium);
  color: var(--text-muted);
  cursor: pointer;
  transition: var(--transition-colors);
}

.leaderboard__tab:hover {
  color: var(--text-secondary);
}

.leaderboard__tab.active {
  background: var(--bg-tertiary);
  color: var(--text-primary);
}

.leaderboard__list {
  padding: var(--space-2);
}

.leaderboard__item {
  display: flex;
  align-items: center;
  gap: var(--space-3);
  padding: var(--space-3);
  border-radius: var(--radius-lg);
  transition: var(--transition-colors);
}

.leaderboard__item:hover {
  background: var(--bg-tertiary);
}

.leaderboard__rank {
  width: 28px;
  height: 28px;
  display: flex;
  align-items: center;
  justify-content: center;
  background: var(--bg-quaternary);
  border-radius: var(--radius-md);
  font-size: var(--text-xs);
  font-weight: var(--font-bold);
  color: var(--text-muted);
  flex-shrink: 0;
}

.leaderboard__item:nth-child(1) .leaderboard__rank {
  background: linear-gradient(135deg, #fbbf24, #f59e0b);
  color: white;
}

.leaderboard__item:nth-child(2) .leaderboard__rank {
  background: linear-gradient(135deg, #94a3b8, #64748b);
  color: white;
}

.leaderboard__item:nth-child(3) .leaderboard__rank {
  background: linear-gradient(135deg, #f97316, #ea580c);
  color: white;
}

.leaderboard__avatar {
  width: 36px;
  height: 36px;
  border-radius: var(--radius-full);
  background: linear-gradient(135deg, var(--accent-primary), var(--accent-cyan));
  display: flex;
  align-items: center;
  justify-content: center;
  color: white;
  font-size: var(--text-sm);
  font-weight: var(--font-bold);
  flex-shrink: 0;
}

.leaderboard__avatar img {
  width: 100%;
  height: 100%;
  border-radius: var(--radius-full);
  object-fit: cover;
}

.leaderboard__info {
  flex: 1;
  min-width: 0;
}

.leaderboard__name {
  font-size: var(--text-sm);
  font-weight: var(--font-medium);
  color: var(--text-primary);
  white-space: nowrap;
  overflow: hidden;
  text-overflow: ellipsis;
}

.leaderboard__meta {
  font-size: var(--text-xs);
  color: var(--text-muted);
}

.leaderboard__score {
  font-family: var(--font-mono);
  font-size: var(--text-sm);
  font-weight: var(--font-semibold);
  color: var(--accent-primary);
  flex-shrink: 0;
}

.leaderboard__item--current {
  background: var(--accent-primary-muted);
}

.leaderboard__item--current .leaderboard__rank {
  background: var(--accent-primary);
  color: white;
}

/* ==========================================================================
   Quick Stats Row
   ========================================================================== */

.quick-stats {
  display: flex;
  gap: var(--space-6);
  padding: var(--space-4);
  background: var(--bg-secondary);
  border: 1px solid var(--border-subtle);
  border-radius: var(--radius-xl);
}

.quick-stat {
  display: flex;
  align-items: center;
  gap: var(--space-3);
}

.quick-stat__icon {
  width: 40px;
  height: 40px;
  display: flex;
  align-items: center;
  justify-content: center;
  background: var(--bg-tertiary);
  border-radius: var(--radius-md);
  color: var(--text-muted);
}

.quick-stat__icon svg {
  width: 20px;
  height: 20px;
}

.quick-stat__content {
  display: flex;
  flex-direction: column;
}

.quick-stat__value {
  font-family: var(--font-display);
  font-size: var(--text-lg);
  font-weight: var(--font-bold);
  color: var(--text-primary);
  line-height: 1;
}

.quick-stat__label {
  font-size: var(--text-xs);
  color: var(--text-muted);
  margin-top: 2px;
}

.quick-stat__divider {
  width: 1px;
  height: 40px;
  background: var(--border-subtle);
}

@media (max-width: 768px) {
  .quick-stats {
    flex-wrap: wrap;
    gap: var(--space-4);
  }

  .quick-stat__divider {
    display: none;
  }

  .quick-stat {
    flex: 1;
    min-width: 120px;
  }
}

/* ==========================================================================
   Comparison Card
   ========================================================================== */

.comparison-card {
  background: var(--bg-secondary);
  border: 1px solid var(--border-subtle);
  border-radius: var(--radius-xl);
  padding: var(--space-5);
}

.comparison-card__header {
  display: flex;
  align-items: center;
  justify-content: space-between;
  margin-bottom: var(--space-4);
}

.comparison-card__title {
  font-size: var(--text-base);
  font-weight: var(--font-semibold);
  color: var(--text-primary);
}

.comparison-card__items {
  display: flex;
  gap: var(--space-4);
}

.comparison-card__item {
  flex: 1;
  text-align: center;
  padding: var(--space-4);
  background: var(--bg-tertiary);
  border-radius: var(--radius-lg);
}

.comparison-card__item-label {
  font-size: var(--text-xs);
  color: var(--text-muted);
  margin-bottom: var(--space-2);
}

.comparison-card__item-value {
  font-family: var(--font-display);
  font-size: var(--text-2xl);
  font-weight: var(--font-bold);
  color: var(--text-primary);
}

.comparison-card__item--highlight {
  background: var(--accent-primary-muted);
}

.comparison-card__item--highlight .comparison-card__item-value {
  color: var(--accent-primary);
}

.comparison-card__vs {
  display: flex;
  align-items: center;
  justify-content: center;
  font-size: var(--text-sm);
  font-weight: var(--font-bold);
  color: var(--text-muted);
}

/* ==========================================================================
   Analytics Summary
   ========================================================================== */

.analytics-summary {
  display: grid;
  grid-template-columns: 2fr 1fr;
  gap: var(--space-6);
}

@media (max-width: 1024px) {
  .analytics-summary {
    grid-template-columns: 1fr;
  }
}

.analytics-summary__main {
  display: flex;
  flex-direction: column;
  gap: var(--space-6);
}

.analytics-summary__sidebar {
  display: flex;
  flex-direction: column;
  gap: var(--space-6);
}

/* ==========================================================================
   Responsive Adjustments
   ========================================================================== */

@media (max-width: 768px) {
  .metric-card {
    padding: var(--space-4);
  }

  .metric-card__value {
    font-size: var(--text-2xl);
  }

  .heatmap {
    padding: var(--space-4);
  }

  .heatmap__grid {
    overflow-x: auto;
  }

  .leaderboard__header {
    padding: var(--space-4);
  }
}
